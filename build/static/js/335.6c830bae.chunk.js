"use strict";(self.webpackChunkpifit=self.webpackChunkpifit||[]).push([[335],{1335:(s,e,t)=>{t.r(e),t.d(e,{default:()=>T});var a=t(5043),l=t(5546),i=t(9800),n=t(1645),o=t(6652),c=t(4443),r=t(3636),d=t(3445),m=t(4843),x=t(2465),h=t(2019),p=t(9472),u=t(4997),j=t(9456),f=t(7744),g=t(9029),v=t(57);var b=t(579);const y=s=>{const{data:e}=s;return(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)(i.A,{justify:"space-between",children:[(0,b.jsx)(n.A,{xs:24,children:(0,b.jsx)(c.A.Text,{className:"py-5 px-3 fw-bold text-secondary-light-5",children:null===e||void 0===e?void 0:e.date})}),(0,b.jsx)(n.A,{xs:24,className:"pr-10 px-sm-0",children:e.data.map(((s,e)=>{var t;return(0,b.jsxs)("div",{className:"d-flex justify-content-between pb-5",children:[(0,b.jsxs)("div",{className:"d-flex align-items-center",children:[(0,b.jsx)("div",{className:"".concat(s.store?"bg-green-3":"bg-yellow-dark-3"," custom-icon-circle h-15 w-15 "),children:(0,b.jsx)("i",{className:" fs-6 ".concat(s.store?"icon-scan  text-green":"icon-purchase-gift-card text-yellow-dark"," ")})}),(0,b.jsx)("div",{className:"ml-5 ml-sm-2 align-items-center",children:(0,b.jsx)("p",{className:"my-1  d-block fw-bold text-capitalize text-primary-dark",children:s.store?"Scan the QR code at ".concat(null===s||void 0===s||null===(t=s.store)||void 0===t?void 0:t.name):"Purchased a gift card from a shop."})})]}),(0,b.jsx)("div",{className:"d-flex align-items-center",children:(0,b.jsx)(d.A,{position:"right",points:"".concat(null!==s&&void 0!==s&&s.store?"+":"-").concat((0,m.X9)(s.points||0)),titleCss:"".concat(null!==s&&void 0!==s&&s.store?"":"text-orange"),css:"w-8"})})]},e)}))})]})})},N=s=>{const[e,t]=(0,a.useState)(!1),{setHistory:l,filterStatus:o,page:c,setPage:r,hasMore:d,setHasMore:x,data:N,setData:A}=s,k=(0,j.wA)(),w=async()=>{let s={filter_status:o};try{var e,a,i,n,d,p;t(!0);const o=await(async(s,e)=>{try{return await(0,v.m)({method:"POST",path:"points/history".concat(e?"?page=".concat(e):""),data:s,isTokenRequired:!0})}catch(t){throw t}})(s,c),h=c+1;let u=[],j=await(0,m.Ao)(o.data.point_history);l({availablePoints:null===o||void 0===o||null===(e=o.data)||void 0===e?void 0:e.total_available_points,earnedPoints:null===o||void 0===o||null===(a=o.data)||void 0===a?void 0:a.total_earned_points,spentPoints:null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.total_spent_points}),u=await(0,m.YD)(N,j),0===(null===o||void 0===o||null===(n=o.data)||void 0===n||null===(d=n.point_history)||void 0===d?void 0:d.length)&&x(!1),r(h),k((0,f.AW)(null===o||void 0===o||null===(p=o.data)||void 0===p?void 0:p.available_points)),A(u),t(!1)}catch(j){var u;h.Ay.error(null===j||void 0===j||null===(u=j.meta)||void 0===u?void 0:u.message)}};return(0,a.useEffect)((()=>{w()}),[o]),(0,b.jsx)(b.Fragment,{children:0!==N.length?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(u.A,{dataLength:N.length,next:w,hasMore:d,children:(0,b.jsx)(i.A,{gutter:[10,10],justify:"start",children:null===N||void 0===N?void 0:N.map(((s,e)=>(0,b.jsx)(n.A,{xs:24,children:(0,b.jsx)(y,{data:s})},e)))})}),d?null:(0,b.jsx)(b.Fragment,{})]}):e?(0,b.jsx)("div",{style:{height:"50vh"},className:"d-flex justify-content-center align-items-center w-full",children:(0,b.jsx)(g.A,{size:"large"})}):(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:(0,b.jsx)(p.A,{className:"",description:"No history found"})})})};const A=t.p+"static/media/Total Points Balance.cf9814fd63d2920aa8e0cae2c5a6f27a.svg";var k=t(3216);const w=()=>{const s=(0,k.Zp)();return(0,b.jsx)("i",{onClick:()=>{s(-1)},className:"icon-back cursor-pointer"})},{Content:P}=l.A;"url(".concat(A,")");const T=function(){const[s,e]=(0,a.useState)(0),[t,l]=(0,a.useState)(1),[h,p]=(0,a.useState)(!0),[u,j]=(0,a.useState)([]),[f,g]=(0,a.useState)({});let v={filterStatus:s,page:t,setPage:l,hasMore:h,setHasMore:p,data:u,setData:j,setHistory:g};const y=t=>{t!==s&&(j([]),p(!0),l(1),e(t))};let A=[{label:(0,b.jsx)("div",{className:"text-secondary-light",onClick:()=>y(0),children:"Recent Transactions"}),key:"0"},{label:(0,b.jsx)("div",{className:"text-secondary-light",onClick:()=>y(1),children:"Total Earnings"}),key:"1"},{label:(0,b.jsx)("div",{className:"text-secondary-light",onClick:()=>y(2),children:"Total Spents"}),key:"2"}];return(0,a.useEffect)((()=>{}),[s]),(0,b.jsx)(r.A,{children:(0,b.jsx)(P,{className:"pt-md-0 pt-20",children:(0,b.jsx)("div",{style:{height:"auto"},className:"mx-md-4 container",children:(0,b.jsxs)(i.A,{children:[(0,b.jsxs)(n.A,{xs:24,sm:14,lg:18,md:16,className:"point-table",children:[(0,b.jsxs)(i.A,{justify:"space-between title bg-white ",children:[(0,b.jsx)(n.A,{className:"d-flex  align-items-center ",children:(0,b.jsx)(x.A,{css:"text-primary-dark",customFont:"fs-4 fs-sm-2",title:(0,b.jsx)(b.Fragment,{children:(0,b.jsxs)("span",{children:[(0,b.jsx)(w,{}),"Points History"]})})})}),(0,b.jsx)(n.A,{className:"d-flex justify-content-end mr-10 pr-sm-0",children:(0,b.jsx)(o.A,{className:"text-secondary-light d-flex border-1 br-1 py-3 py-sm-2 mt-sm-3 border-color-select fs-2 fs-md-1 w-auto",menu:{items:A},trigger:["click"],placement:"bottomRight",children:(0,b.jsxs)("span",{className:"fs-2 cursor-pointer",children:[(0,b.jsx)("i",{className:"icon-filter text-primary cursor-pointer"}),A.find((e=>e.key==s)).label,(0,b.jsx)("i",{className:"icon-faq-open text-primary-dark cursor-pointer"})]})})})]}),(0,b.jsx)(N,{...v})]}),(0,b.jsx)(n.A,{xs:24,sm:10,lg:6,md:8,className:"point-history",children:(0,b.jsxs)(i.A,{gutter:[0,12],className:"history",children:[(0,b.jsxs)(n.A,{xs:24,sm:24,lg:24,md:24,align:"middle",className:"br-5 bg-primary-2 point-balance d-flex py-5 py-sm-2 px-10 total-box bg-image image-balance display-relative",children:[(0,b.jsx)(d.A,{css:"w-14 w-sm-12"}),(0,b.jsx)("div",{className:"d-flex justify-content-center align-items-center",children:(0,b.jsxs)("div",{className:"top-auto bottom-0 display-absolute",children:[(0,b.jsx)("p",{className:"d-block m-1 fw-bold text-capitalize",children:(0,b.jsx)(x.A,{css:"d-flex align-items-start text-primary-dark",title:(0,m.X9)((null===f||void 0===f?void 0:f.availablePoints)||0),customFont:"fs-9 fs-md-6"})}),(0,b.jsx)(c.A.Text,{className:"px-0",children:"Total Point Balance"})]})})]}),(0,b.jsx)(n.A,{xs:12,sm:12,lg:24,md:24,xl:12,className:"earn-box",children:(0,b.jsxs)("div",{className:"br-5 position-relative earn-and-spent bg-egg-blue-2 bg-image image-earn",children:[(0,b.jsx)("span",{className:"position-absolute top-0 bottom-auto fs-6 left-0 right-0",children:(0,b.jsx)("i",{className:"fs-6 justify-content-sm-end d-sm-flex fs-sm-3 fw-bold text-egg-blue icon-total-earned"})}),(0,b.jsxs)("div",{className:"position-absolute top-auto bottom-0 p-3",children:[(0,b.jsx)("p",{className:"d-block m-1 fw-bold text-capitalize",children:(0,b.jsx)(x.A,{css:"d-flex align-items-start custom-nest-hub text-primary-dark",title:(0,m.X9)((null===f||void 0===f?void 0:f.earnedPoints)||0),customFont:"fs-6 fs-md-3"})}),(0,b.jsx)(c.A.Text,{className:"px-0 custom-nest-hub-text text-secondary-light",children:"Total Earned Points"})]})]})}),(0,b.jsx)(n.A,{xs:12,sm:12,lg:24,md:24,xl:12,className:"spent-box",children:(0,b.jsxs)("div",{className:"position-relative d-flex br-5 earn-and-spent bg-yellow-dark-2 bg-image image-spent",children:[(0,b.jsx)("span",{className:"position-absolute top-0 bottom-auto fs-6 left-0 right-0",children:(0,b.jsx)("i",{className:"fs-6  justify-content-sm-end d-sm-flex fs-sm-3 fw-bold text-yellow-dark  icon-total-spent-1"})}),(0,b.jsxs)("div",{className:"position-absolute top-auto bottom-0 p-3 ",children:[(0,b.jsx)("p",{className:"d-block m-1 fw-bold text-capitalize",children:(0,b.jsx)(x.A,{css:"d-flex align-items-start custom-nest-hub text-primary-dark",title:(0,m.X9)((null===f||void 0===f?void 0:f.spentPoints)||0),customFont:"fs-6 fs-md-3"})}),(0,b.jsx)(c.A.Text,{className:"px-0 fs-1 fs-sm-0 custom-nest-hub-text text-secondary-light",children:"Total Spent Points"})]})]})})]})})]})})})})}}}]);
//# sourceMappingURL=335.6c830bae.chunk.js.map