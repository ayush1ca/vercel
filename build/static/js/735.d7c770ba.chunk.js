"use strict";(self.webpackChunkpifit=self.webpackChunkpifit||[]).push([[735],{787:(e,s,t)=>{t.r(s),t.d(s,{default:()=>W});var i=t(5043),a=t(2465),l=t(57);const o=async(e,s)=>{try{return await(0,l.m)({method:"POST",path:"coupons".concat(s?"?page=".concat(s):""),data:e,isTokenRequired:!0})}catch(t){throw t}};var n=t(2019),r=t(9800),d=t(1645),c=t(9472),m=t(3445),u=t(8677),v=t(4443),h=t(7326),p=t(6399),x=t(7021),f=t(2703);const b=t.p+"static/media/total-gift-cards.17785f7615da0d9ca74517caf398fd3f.svg";const j=t.p+"static/media/are-you-sure.0076b3708f93932965ad6e6dea9ddd1f.svg";const y=t.p+"static/media/purchase-successfully.9bee25a6c8efb11cae94c21ef914cb22.svg";var g=t(9456),w=t(4843),N=t(446),A=t.n(N),S=t(7744),k=t(579);const{Paragraph:C}=v.A,_=e=>{var s;const{cardData:t}=e,a=(0,g.wA)(),[o,r]=(0,i.useState)(!1),[d,c]=(0,i.useState)(!1),[u,v]=(0,i.useState)({totalCards:null,totalPoints:null});let N=A()(null===t||void 0===t?void 0:t.expiry_date).format("DD MMM YYYY");const{Panel:_}=h.A,T=(0,g.d4)((e=>{var s;return null===e||void 0===e||null===(s=e.counter)||void 0===s?void 0:s.availableBalance})),P=(0,g.d4)((e=>{var s;return null===e||void 0===e||null===(s=e.counter)||void 0===s?void 0:s.shopData})),D={coupon_id:null===t||void 0===t?void 0:t.id},M=()=>{r(!1),z(D)},H=()=>{c(!1)},z=async e=>{try{var s,t,i,o;const r=await(async e=>{try{return await(0,l.m)({method:"POST",path:"coupons/buy",data:e})}catch(s){throw s}})(e);n.Ay.success(null===r||void 0===r||null===(s=r.meta)||void 0===s?void 0:s.message),v({...u,totalCards:null===r||void 0===r||null===(t=r.data)||void 0===t?void 0:t.total_cards,totalPoints:null===r||void 0===r||null===(i=r.data)||void 0===i?void 0:i.total_points}),a((0,S.AW)(null===r||void 0===r||null===(o=r.data)||void 0===o?void 0:o.total_points)),c(!0)}catch(d){var r;n.Ay.error(null===d||void 0===d||null===(r=d.meta)||void 0===r?void 0:r.message)}},L=()=>(0,k.jsx)("i",{className:"icon-copy fs-3"});return(0,k.jsxs)("div",{className:"text-primary-dark mb-5",children:[(0,k.jsx)("img",{src:t.image,className:"img-cover w-full h-48 br-bl-3 br-br-3",alt:"image"}),(0,k.jsxs)("div",{className:"mx-6",children:[2==P?(0,k.jsx)(p.A,{className:"mt-5",color:"#f50",children:(0,w.wY)(null===t||void 0===t?void 0:t.expiry_date)}):"",(0,k.jsx)("p",{className:"fs-3 mt-2 fw-bold text-capitalize custom-fonts",children:null===t||void 0===t?void 0:t.title}),(0,k.jsx)("div",{className:"p-2 br-5 bg-primary-light-3 w-fit mt-0",children:(0,k.jsx)(m.A,{points:null===t||void 0===t?void 0:t.points,css:"w-7",divCss:"justify-content-center"})}),(0,k.jsx)("p",{className:"text-capitalize lh-2",children:null===t||void 0===t?void 0:t.description}),2!=P?(0,k.jsxs)("div",{className:"".concat("d-flex justify-content-between align-items-center"," px-3 border-1 br-3"),children:[(0,k.jsx)("p",{children:"Valid until"}),(0,k.jsx)("p",{className:"fw-bold",children:N||""})]}):"",1!=P&&(0,k.jsx)("div",{className:"bg-placeholder my-3 br-2",children:(0,k.jsx)(C,{className:"d-flex align-items-center justify-content-between p-3 h-12 max-h-14",copyable:{icon:(0,k.jsx)(L,{})},children:(0,k.jsxs)("span",{className:"pr-3",children:["Code: ",(0,k.jsx)("span",{className:"fw-bold",children:null===t||void 0===t?void 0:t.coupon_code})]})})}),(0,k.jsxs)("div",{children:[(0,k.jsx)("p",{className:"fw-bold fs-1 mt-6",children:"How to Redeem:"}),(0,k.jsx)("div",{dangerouslySetInnerHTML:{__html:null===t||void 0===t?void 0:t.how_to_redeem}})]}),(0,k.jsx)(h.A,{className:"mt-3 fw-bold",children:(0,k.jsx)(_,{header:"Terms & Conditions",children:(0,k.jsx)("div",{dangerouslySetInnerHTML:{__html:null===t||void 0===t||null===(s=t.coupon_owner)||void 0===s?void 0:s.terms_conditions},className:"text-primary-dark"})},"1")}),1==P&&(0,k.jsxs)("div",{children:[(0,k.jsxs)("div",{className:"d-flex justify-content-center",children:[(0,k.jsx)("p",{className:"text-capitalize mx-3",children:"available balance"}),(0,k.jsx)(m.A,{points:T?(0,w.X9)(T):0,css:"w-7"})]}),(0,k.jsxs)(x.Ay,{className:"custom-fonts d-flex justify-content-center align-items-center bg-primary w-full h-14 text-white",onClick:()=>{r(!0)},type:"primary",children:[(0,k.jsx)("div",{className:"ml-4 mr-2 text-capitalize fw-bold",children:"get gift card for"}),(0,k.jsx)(m.A,{points:null!==t&&void 0!==t&&t.points?(0,w.X9)(null===t||void 0===t?void 0:t.points):0,css:"w-7"})]})]})]}),(0,k.jsx)(f.A,{open:o,onOk:M,onCancel:()=>{r(!1)},className:"w-full d-flex justify-content-center",footer:(0,k.jsx)(x.Ay,{type:"primary",onClick:()=>{M()},className:"w-full h-14 fw-bold",children:"Confirm Buy"},"submit"),children:(0,k.jsxs)("div",{className:"d-grid justify-content-center text-center text-primary-dark p-5",children:[(0,k.jsx)("img",{src:j,alt:"",className:"justify-self-center w-24"}),(0,k.jsx)("p",{className:"fs-2 fw-bold mb-0",children:"Are you Sure?"}),(0,k.jsx)("p",{className:"mt-0",children:"Are you sure to buy this gift card in exchange for"}),(0,k.jsx)("div",{className:"justify-self-center",children:(0,k.jsx)(m.A,{points:"".concat(null===t||void 0===t?void 0:t.points," points"),css:"w-7",titleCss:"text-link"})})]})}),(0,k.jsx)(f.A,{open:d,onOk:H,onCancel:()=>{c(!1)},className:"d-flex justify-content-center",footer:(0,k.jsx)(x.Ay,{type:"primary",onClick:H,className:"w-full h-14 fw-bold",children:"Continue Shopping"},"submit"),children:(0,k.jsxs)("div",{className:"d-grid justify-content-center text-center text-primary-dark p-5 text-capitalize",children:[(0,k.jsx)("img",{src:y,alt:"",className:"justify-self-center w-24"}),(0,k.jsx)("p",{className:"fs-2 fw-bold text-capitalize",children:"gift card purchase successfully"}),(0,k.jsx)("p",{className:"mt-0",children:"lorem ipsum dolor sit amet, consetetur"}),(0,k.jsxs)("div",{className:"d-flex justify-content-around",children:[(0,k.jsxs)("div",{className:"",children:[(0,k.jsx)("p",{children:"total points"}),(0,k.jsx)(m.A,{points:null===u||void 0===u?void 0:u.totalPoints,css:"w-7",divCss:"bg-primary-light-5 px-5 py-1 br-6"})]}),(0,k.jsxs)("div",{className:"justify-self-center",children:[(0,k.jsx)("p",{children:"total gift cards"}),(0,k.jsx)(m.A,{icon:b,points:null===u||void 0===u?void 0:u.totalCards,css:"w-7",divCss:"bg-primary-light-5 px-5 py-1 br-6"})]})]})]})})]})};const T=t.p+"static/media/info.c8093cb64276930754f0b3abd85962dc.svg",P=e=>{var s;const{cardData:t,availablePoints:a}=e,[l,o]=(0,i.useState)(!1),n=(0,g.d4)((e=>{var s;return null===e||void 0===e||null===(s=e.counter)||void 0===s?void 0:s.shopData}));return(0,i.useEffect)((()=>{let e;return l?e=setTimeout((()=>{document.body.style.overflow="hidden"}),100):(clearTimeout(e),document.body.style.overflow=""),()=>clearTimeout(e)}),[l]),(0,k.jsxs)("div",{className:"position-relative",children:[(0,k.jsx)("div",{className:"m-0 p-0 border-none w-full lib-card cursor-pointer br-3",onClick:()=>(document.body.style.overflow="hidden",void o(!0)),children:(0,k.jsxs)("div",{className:"position-relative",children:[(0,k.jsx)("img",{src:null===t||void 0===t?void 0:t.image,alt:"",className:"img-cover w-full h-md-48 h-56 br-3 z-0"}),(0,k.jsx)("div",{className:"position-absolute image-shadow z-0 w-full top-0 h-md-48 h-56 br-3"}),(0,k.jsx)("div",{className:"position-absolute w-18 h-18 img-cover bg-white top-0 br-br-3 p-1",children:(0,k.jsx)("img",{"content-":!0,"align-items-center":!0,src:null===t||void 0===t||null===(s=t.coupon_owner)||void 0===s?void 0:s.logo,alt:"",className:"w-16 br-br-4",style:{aspectRatio:1,objectFit:"contain"}})}),(0,k.jsxs)("div",{className:"position-absolute text-start bottom-0 top-auto pl-3 text-white",children:[(0,k.jsx)("p",{className:"fw-bold",children:null===t||void 0===t?void 0:t.title}),1==n?(0,k.jsx)(m.A,{points:null===t||void 0===t?void 0:t.points,css:"w-10",divCss:"pr-2 br-5 w-fit backdrop-4 bg-white-1 mb-3",titleCss:"lh-2 fs-2 text-white"}):(0,k.jsxs)("div",{className:"d-flex align-items-center backdrop-4 bg-white-1 mb-4 br-5 w-fit",children:[(0,k.jsx)("img",{src:T,alt:"",className:"w-9 mr-1"}),(0,k.jsx)("div",{className:"fw-bold py-2 pr-3 pl-1 w-fit",children:(0,w.wY)(null===t||void 0===t?void 0:t.expiry_date)})]})]})]})}),(0,k.jsx)(u.A,{placement:"right",onClose:()=>(document.body.style.overflow="",void o(!1)),open:l,closable:!0,destroyOnClose:!0,width:window.innerWidth>415?375:window.innerWidth,className:"custom-drawer",closeIcon:(0,k.jsx)("i",{className:"icon-close p-1 br-1 bg-secondary-light-4 text-white fw-bold"}),children:(0,k.jsx)(_,{cardData:t,availablePoints:a})})]})};var D=t(4997),M=t(9029);const H=e=>{const[s,t]=(0,i.useState)(0),[a,l]=(0,i.useState)(!0),m=(0,g.d4)((e=>{var s;return null===e||void 0===e||null===(s=e.counter)||void 0===s?void 0:s.shopData})),{category_id:u,shopPage:v,setShopPage:h,shopHasMore:p,setShopHasMore:x,shopData:f,setShopData:b,libraryPage:j,setLibraryPage:y,libraryHasMore:w,setLibraryHasMore:N,libraryData:A,setLibraryData:C}=e,_=(0,g.wA)(),T=async()=>{let e={category_id:0==u?void 0:u,type:m};try{if(2==m){var s;l(!0);const i=await o(e,j),a=j+1;let n=[];n=[...A,...i.data.user_coupons],0===(null===i||void 0===i||null===(s=i.data)||void 0===s?void 0:s.user_coupons.length)&&N(!1),y(a),t(i.data.available_points),C(n),b([]),h(1),x(!0),l(!1)}else{var i,a;l(!0);const s=await o(e,v),n=v+1;let r=[];r=[...f,...s.data.all_coupons],0===(null===s||void 0===s||null===(i=s.data)||void 0===i?void 0:i.all_coupons.length)&&x(!1),h(n),t(s.data.available_points),_((0,S.AW)(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.available_points)),b(r),C([]),y(1),N(!0),l(!1)}}catch(d){var r;n.Ay.error(null===d||void 0===d||null===(r=d.meta)||void 0===r?void 0:r.message)}};return(0,i.useEffect)((()=>{T()}),[u,m]),(0,k.jsx)(k.Fragment,{children:0!==f.length||0!==A.length?(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(D.A,{dataLength:1==m?f.length:A.length,next:T,hasMore:1==m?p:w,children:(0,k.jsx)(r.A,{gutter:[10,10],justify:"start",children:1==m?null===f||void 0===f?void 0:f.map(((e,t)=>(0,k.jsx)(d.A,{xs:12,sm:12,md:8,lg:6,xl:4,children:(0,k.jsx)(P,{cardData:e,availablePoints:s},null===e||void 0===e?void 0:e.id)}))):null===A||void 0===A?void 0:A.map(((e,t)=>(0,k.jsx)(d.A,{xs:12,sm:12,md:8,lg:6,xl:4,children:(0,k.jsx)(P,{cardData:e.coupon,availablePoints:s},null===e||void 0===e?void 0:e.id)})))})}),p&&w?null:(0,k.jsx)(k.Fragment,{})]}):a?(0,k.jsx)("div",{style:{height:"50vh"},className:"d-flex justify-content-center align-items-center w-full",children:(0,k.jsx)(M.A,{size:"large"})}):(0,k.jsx)("div",{className:"d-flex justify-content-center align-items-center",style:{height:"50vh"},children:(0,k.jsx)(c.A,{className:"",description:"No coupons found"})})})};var z=t(2382),L=(t(4430),t(9078),t(5546)),F=t(3636),O=t(3216);const{Content:Y}=L.A;const W=function(){var e;const[s,t]=(0,i.useState)({}),[o,r]=(0,i.useState)(0),[d,c]=(0,i.useState)(1),[u,v]=(0,i.useState)(!0),[h,p]=(0,i.useState)([]),[x,f]=(0,i.useState)(1),[b,j]=(0,i.useState)(!0),[y,N]=(0,i.useState)([]),A=(0,O.Zp)(),S=(0,g.d4)((e=>{var s;return null===e||void 0===e||null===(s=e.counter)||void 0===s?void 0:s.shopData})),C=(0,g.d4)((e=>{var s;return null===e||void 0===e||null===(s=e.counter)||void 0===s?void 0:s.availableBalance})),_=e=>{e!==o&&(r(e),c(1),v(!0),p([]),f(1),j(!0),N([])),window.scrollTo({top:0,behavior:"smooth"})},T=async()=>{try{const e=await(async e=>{try{return await(0,l.m)({method:"POST",path:"all-categories",data:e,isTokenRequired:!0})}catch(s){throw s}})();e.data.categories=[{id:0,title:"All Coupons"},...e.data.categories],t(e.data)}catch(s){var e;n.Ay.error(null===s||void 0===s||null===(e=s.meta)||void 0===e?void 0:e.message)}};return(0,i.useEffect)((()=>{T()}),[]),(0,i.useEffect)((()=>{}),[o]),(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(F.A,{handleCategory:_,children:(0,k.jsx)(Y,{className:"pt-md-0 pt-20",children:(0,k.jsxs)("div",{style:{height:"auto"},className:"mx-md-4 container",children:[(0,k.jsxs)("div",{className:" d-flex d-md-grid justify-content-between justify-content-md-center align-items-center pt-md-0 mx-md-0 category  slide-sticky bg-white",children:[(0,k.jsx)(a.A,{title:1==S?"Gift Card Shop":"My Gift Cards",css:"text-primary-dark text-start w-md-full w-half text-md-center fs-7 fs-lg-6 fs-md-5 mt-1 mb-2 fw-bold text-primary-dark "}),(0,k.jsxs)("div",{className:"d-flex align-items-center justify-content-md-between text-primary-dark mb-",children:[(0,k.jsx)(m.A,{points:C?(0,w.X9)(C):0,css:"w-12 mr-1",divCss:"mx-2"}),(0,k.jsx)("div",{className:"border-r-1 pr-4 h-8 mr-3"}),(0,k.jsxs)("div",{onClick:()=>{_(0),A("/point-history")},className:"text-decoration-none d-flex align-items-center cursor-pointer",children:[(0,k.jsx)("p",{className:"mx-2 text-link fw-bold text-capitalize",children:"points history"}),(0,k.jsx)("div",{className:"bg-link-3 p-2 br-9 h-11 w-11 ",children:(0,k.jsx)("i",{className:"icon-history text-link"})})]})]})]}),(0,k.jsx)(z.A,{infinite:!1,speed:1e3,mobileFirst:!0,arrows:!1,variableWidth:!0,responsive:[{breakpoint:1300,settings:{slidesToShow:8,slidesToScroll:3}},{breakpoint:1091,settings:{slidesToShow:6,slidesToScroll:4}},{breakpoint:844,settings:{slidesToShow:4,slidesToScroll:5}},{breakpoint:517,settings:{slidesToShow:3,slidesToScroll:6}},{breakpoint:375,settings:{slidesToShow:2,slidesToScroll:8}}],className:"title bg-white",children:null===s||void 0===s||null===(e=s.categories)||void 0===e?void 0:e.map((e=>(0,k.jsx)("div",{className:"custom-fonts text-decoration-none my-2 mx-1 w-min mb-5 cursor-pointer",style:{width:"auto"},onClick:()=>_(e.id),children:(0,k.jsx)("div",{className:"text-primary-dark fw-bold py-3 px-6 br-2 w-fit bg-placeholder ".concat(e.id===o?"active-link":""),children:null===e||void 0===e?void 0:e.title})},null===e||void 0===e?void 0:e.id)))}),(0,k.jsx)("div",{className:"mt-5",children:(0,k.jsx)(H,{category_id:o,shopPage:d,setShopPage:c,shopHasMore:u,setShopHasMore:v,shopData:h,setShopData:p,libraryPage:x,setLibraryPage:f,libraryHasMore:b,setLibraryHasMore:j,libraryData:y,setLibraryData:N})})]})})})})}}}]);
//# sourceMappingURL=735.d7c770ba.chunk.js.map